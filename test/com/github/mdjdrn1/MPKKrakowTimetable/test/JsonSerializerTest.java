package com.github.mdjdrn1.MPKKrakowTimetable.test;

import com.github.mdjdrn1.MPKKrakowTimetable.CracowLine;
import com.github.mdjdrn1.MPKKrakowTimetable.ILine;
import com.github.mdjdrn1.MPKKrakowTimetable.JsonSerializer;
import org.junit.jupiter.api.Test;

import static org.assertj.core.api.Assertions.assertThat;

public class JsonSerializerTest
{
    @Test
    void is501JsonValid() throws Exception
    {
        String expected = "{\"line\":{\"number\":501,\"course\":[{\"direction\":\"Chełmońskiego Pętla\",\"timetable\":[{\"description\":\"Weekday\",\"hours\":[[],[],[],[],[\"45\"],[\"05\",\"25\",\"40\",\"55\"],[\"11\",\"28\",\"43\",\"57\"],[\"11\",\"26\",\"41\",\"56\"],[\"11\",\"26\",\"41\",\"56\"],[\"11\",\"26\",\"39\",\"52\"],[\"07\",\"22\",\"37\",\"52\"],[\"07\",\"22\",\"37\",\"52\"],[\"07\",\"23\",\"38\",\"53\"],[\"08\",\"23\",\"37\",\"52\"],[\"07\",\"22\",\"37\",\"52\"],[\"07\",\"22\",\"37\",\"52\"],[\"07\",\"22\",\"37\",\"52\"],[\"07\",\"22\",\"37\",\"52\"],[\"12\",\"29\",\"44\",\"59\"],[\"14\",\"30\",\"45\"],[\"02\",\"17\",\"37\",\"57\"],[\"16\",\"33\",\"53\"],[\"13\",\"33\"],[]]},{\"description\":\"Saturdays\",\"hours\":[[],[],[],[],[],[\"10\",\"40\"],[\"10\",\"40\"],[\"08\",\"38\"],[\"06\",\"26\",\"46\"],[\"06\",\"26\",\"46\"],[\"06\",\"26\",\"46\"],[\"06\",\"26\",\"46\"],[\"06\",\"26\",\"46\"],[\"06\",\"26\",\"46\"],[\"06\",\"26\",\"46\"],[\"06\",\"26\",\"46\"],[\"06\",\"26\",\"46\"],[\"06\",\"26\",\"46\"],[\"06\",\"26\",\"47\"],[\"07\",\"27\",\"48\"],[\"09\",\"33\"],[\"04\",\"33\"],[\"03\",\"33\"],[]]},{\"description\":\"Holidays\",\"hours\":[[],[],[],[],[],[\"10\",\"40\"],[\"10\",\"40\"],[\"08\",\"38\"],[\"06\",\"26\",\"46\"],[\"06\",\"26\",\"46\"],[\"06\",\"26\",\"46\"],[\"06\",\"26\",\"46\"],[\"06\",\"26\",\"46\"],[\"06\",\"26\",\"46\"],[\"06\",\"26\",\"46\"],[\"06\",\"26\",\"46\"],[\"06\",\"26\",\"46\"],[\"06\",\"26\",\"46\"],[\"06\",\"26\",\"47\"],[\"07\",\"27\",\"48\"],[\"09\",\"33\"],[\"04\",\"33\"],[\"03\",\"33\"],[]]}],\"stop\":[{\"id\":1,\"name\":\"Bulwarowa\",\"onDemand\":false,\"delay\":0},{\"id\":2,\"name\":\"Struga\",\"onDemand\":false,\"delay\":1},{\"id\":3,\"name\":\"Aleja Róż\",\"onDemand\":false,\"delay\":3},{\"id\":4,\"name\":\"Żeromskiego\",\"onDemand\":false,\"delay\":4},{\"id\":5,\"name\":\"Teatr Ludowy\",\"onDemand\":false,\"delay\":5},{\"id\":6,\"name\":\"Arka\",\"onDemand\":false,\"delay\":7},{\"id\":7,\"name\":\"Rondo Hipokratesa\",\"onDemand\":false,\"delay\":9},{\"id\":8,\"name\":\"Os.Na Lotnisku\",\"onDemand\":false,\"delay\":11},{\"id\":9,\"name\":\"Wiślicka\",\"onDemand\":false,\"delay\":13},{\"id\":10,\"name\":\"Bora-Komorowskiego\",\"onDemand\":false,\"delay\":15},{\"id\":11,\"name\":\"Miechowity\",\"onDemand\":false,\"delay\":17},{\"id\":12,\"name\":\"Rondo Mogilskie\",\"onDemand\":false,\"delay\":22},{\"id\":13,\"name\":\"Uniwersytet Ekonomiczny\",\"onDemand\":false,\"delay\":23},{\"id\":14,\"name\":\"Politechnika\",\"onDemand\":false,\"delay\":25},{\"id\":15,\"name\":\"Nowy Kleparz\",\"onDemand\":false,\"delay\":28},{\"id\":16,\"name\":\"Plac Inwalidów\",\"onDemand\":false,\"delay\":30},{\"id\":17,\"name\":\"Czarnowiejska\",\"onDemand\":false,\"delay\":32},{\"id\":18,\"name\":\"Miasteczko Studenckie AGH\",\"onDemand\":false,\"delay\":35},{\"id\":19,\"name\":\"Przybyszewskiego\",\"onDemand\":false,\"delay\":37},{\"id\":20,\"name\":\"Zarzecze\",\"onDemand\":false,\"delay\":39},{\"id\":21,\"name\":\"Bronowice Wiadukt\",\"onDemand\":false,\"delay\":40},{\"id\":22,\"name\":\"Rondo Ofiar Katynia\",\"onDemand\":false,\"delay\":42}]},{\"direction\":\"Bulwarowa\",\"timetable\":[{\"description\":\"Weekday\",\"hours\":[[],[],[],[],[],[\"00\",\"20\",\"40\"],[\"00\",\"15\",\"29\",\"43\",\"56\"],[\"10\",\"26\",\"41\",\"55\"],[\"10\",\"25\",\"40\",\"55\"],[\"10\",\"25\",\"40\",\"55\"],[\"10\",\"25\",\"40\",\"55\"],[\"10\",\"25\",\"40\",\"55\"],[\"10\",\"25\",\"40\",\"55\"],[\"10\",\"25\",\"40\",\"54\"],[\"09\",\"24\",\"39\",\"55\"],[\"10\",\"25\",\"40\",\"55\"],[\"10\",\"25\",\"40\",\"55\"],[\"10\",\"25\",\"40\",\"55\"],[\"10\",\"25\",\"40\",\"55\"],[\"11\",\"25\",\"40\",\"55\"],[\"13\",\"28\",\"44\",\"59\"],[\"13\",\"30\",\"52\"],[\"12\",\"35\",\"55\"],[]]},{\"description\":\"Saturdays\",\"hours\":[[],[],[],[],[],[\"05\",\"34\"],[\"03\",\"33\"],[\"02\",\"24\",\"44\"],[\"04\",\"24\",\"44\"],[\"04\",\"24\",\"44\"],[\"04\",\"24\",\"44\"],[\"04\",\"24\",\"44\"],[\"04\",\"24\",\"44\"],[\"04\",\"24\",\"44\"],[\"04\",\"24\",\"44\"],[\"04\",\"24\",\"44\"],[\"04\",\"24\",\"44\"],[\"04\",\"24\",\"44\"],[\"04\",\"24\",\"44\"],[\"04\",\"24\",\"44\"],[\"05\",\"25\",\"50\"],[\"15\",\"37\"],[\"07\",\"37\"],[]]},{\"description\":\"Holidays\",\"hours\":[[],[],[],[],[],[\"05\",\"34\"],[\"03\",\"33\"],[\"02\",\"24\",\"44\"],[\"04\",\"24\",\"44\"],[\"04\",\"24\",\"44\"],[\"04\",\"24\",\"44\"],[\"04\",\"24\",\"44\"],[\"04\",\"24\",\"44\"],[\"04\",\"24\",\"44\"],[\"04\",\"24\",\"44\"],[\"04\",\"24\",\"44\"],[\"04\",\"24\",\"44\"],[\"04\",\"24\",\"44\"],[\"04\",\"24\",\"44\"],[\"04\",\"24\",\"44\"],[\"05\",\"25\",\"50\"],[\"15\",\"37\"],[\"07\",\"37\"],[]]}],\"stop\":[{\"id\":23,\"name\":\"Chełmońskiego Pętla\",\"onDemand\":false,\"delay\":0},{\"id\":24,\"name\":\"Stawowa\",\"onDemand\":false,\"delay\":1},{\"id\":25,\"name\":\"Rondo Ofiar Katynia\",\"onDemand\":false,\"delay\":3},{\"id\":26,\"name\":\"Bronowice Wiadukt\",\"onDemand\":false,\"delay\":4},{\"id\":27,\"name\":\"Zarzecze\",\"onDemand\":false,\"delay\":5},{\"id\":28,\"name\":\"Przybyszewskiego\",\"onDemand\":false,\"delay\":8},{\"id\":29,\"name\":\"Miasteczko Studenckie AGH\",\"onDemand\":false,\"delay\":10},{\"id\":30,\"name\":\"Czarnowiejska\",\"onDemand\":false,\"delay\":12},{\"id\":31,\"name\":\"Plac Inwalidów\",\"onDemand\":false,\"delay\":15},{\"id\":32,\"name\":\"Nowy Kleparz\",\"onDemand\":false,\"delay\":17},{\"id\":33,\"name\":\"Politechnika\",\"onDemand\":false,\"delay\":19},{\"id\":34,\"name\":\"Uniwersytet Ekonomiczny\",\"onDemand\":false,\"delay\":21},{\"id\":35,\"name\":\"Rondo Mogilskie\",\"onDemand\":false,\"delay\":24},{\"id\":36,\"name\":\"Miechowity\",\"onDemand\":false,\"delay\":29},{\"id\":37,\"name\":\"Bora-Komorowskiego\",\"onDemand\":false,\"delay\":31},{\"id\":38,\"name\":\"Wiślicka\",\"onDemand\":false,\"delay\":34},{\"id\":39,\"name\":\"Os.Na Lotnisku\",\"onDemand\":false,\"delay\":36},{\"id\":40,\"name\":\"Rondo Hipokratesa\",\"onDemand\":false,\"delay\":39},{\"id\":41,\"name\":\"Arka\",\"onDemand\":false,\"delay\":41},{\"id\":42,\"name\":\"Teatr Ludowy\",\"onDemand\":false,\"delay\":42},{\"id\":43,\"name\":\"Żeromskiego\",\"onDemand\":false,\"delay\":43},{\"id\":44,\"name\":\"Aleja Róż\",\"onDemand\":false,\"delay\":44},{\"id\":45,\"name\":\"Struga\",\"onDemand\":false,\"delay\":46}]}]}}";
        JsonSerializer serializer = new JsonSerializer();

        ILine line = new CracowLine(501);
        String actual = serializer.serializeLine(line);

        assertThat(expected).isEqualTo(actual);
    }

    @Test
    void is283JsonValid() throws Exception
    {
        String expected = "{\"line\":{\"number\":283,\"course\":[{\"direction\":\"Skawina\",\"timetable\":[{\"description\":\"Weekday\",\"hours\":[[],[],[],[],[\"15\",\"39\"],[\"05\",\"35\"],[\"06\",\"34\"],[\"03\",\"34\"],[\"04\",\"34\"],[\"12\",\"42\"],[\"22\"],[\"24\"],[\"30\"],[\"04\",\"22\",\"38\"],[\"06\",\"36\"],[\"06\",\"38\",\"58\"],[\"38\"],[\"08\",\"39\"],[\"08\",\"38\"],[\"08\",\"35\"],[\"30\"],[\"30\"],[\"30\"],[\"30\"]]},{\"description\":\"Saturdays\",\"hours\":[[],[],[],[],[\"55\"],[\"45\"],[\"30\"],[\"15\"],[\"09\",\"39\"],[\"14\",\"44\"],[\"18\",\"54\"],[\"44\"],[\"20\",\"54\"],[\"28\"],[\"04\",\"56\"],[\"31\"],[\"11\",\"54\"],[\"24\"],[\"10\"],[\"00\",\"40\"],[\"15\",\"45\"],[\"15\",\"48\"],[\"15\"],[\"15\"]]},{\"description\":\"Holidays\",\"hours\":[[],[],[],[],[\"55\"],[\"55\"],[\"59\"],[],[\"02\"],[\"03\"],[\"05\",\"57\"],[\"51\"],[\"51\"],[\"51\"],[\"58\"],[\"58\"],[],[\"01\"],[\"02\"],[\"02\"],[\"07\"],[\"05\"],[\"02\"],[\"05\"]]}],\"stop\":[{\"id\":1,\"name\":\"Czerwone Maki P+R\",\"onDemand\":false,\"delay\":0},{\"id\":2,\"name\":\"Czerwone Maki P+R\",\"onDemand\":false,\"delay\":1},{\"id\":3,\"name\":\"Bunscha\",\"onDemand\":true,\"delay\":2},{\"id\":4,\"name\":\"Babińskiego\",\"onDemand\":false,\"delay\":3},{\"id\":5,\"name\":\"Skotniki\",\"onDemand\":false,\"delay\":4},{\"id\":6,\"name\":\"Baczyńskiego\",\"onDemand\":true,\"delay\":5},{\"id\":7,\"name\":\"Wrony\",\"onDemand\":false,\"delay\":7},{\"id\":8,\"name\":\"Skawina Podlipki\",\"onDemand\":false,\"delay\":9},{\"id\":9,\"name\":\"Skawina Rzepnik\",\"onDemand\":false,\"delay\":10},{\"id\":10,\"name\":\"Skawina Cmentarz\",\"onDemand\":false,\"delay\":12},{\"id\":11,\"name\":\"Skawina Popiełuszki\",\"onDemand\":false,\"delay\":13},{\"id\":12,\"name\":\"Skawina Ajka\",\"onDemand\":false,\"delay\":14}]},{\"direction\":\"Czerwone Maki P+R\",\"timetable\":[{\"description\":\"Weekday\",\"hours\":[[],[],[],[],[\"35\"],[\"00\",\"30\",\"57\"],[\"30\"],[\"00\",\"30\"],[\"00\",\"30\"],[\"00\",\"20\",\"50\"],[\"50\"],[\"50\"],[\"30\"],[\"00\",\"30\"],[\"00\",\"30\"],[\"00\",\"30\"],[\"00\",\"20\"],[\"00\",\"30\"],[\"00\",\"30\"],[\"00\",\"30\"],[\"00\",\"50\"],[\"50\"],[\"50\"],[\"20\",\"50\"]]},{\"description\":\"Saturdays\",\"hours\":[[],[],[],[],[],[\"15\"],[\"05\",\"50\"],[\"36\"],[\"31\"],[\"00\",\"35\"],[\"08\",\"50\"],[\"30\"],[\"10\",\"41\"],[\"18\"],[\"10\",\"47\"],[\"25\"],[\"12\",\"38\"],[\"25\"],[\"12\",\"40\"],[\"25\"],[\"10\",\"40\"],[\"15\",\"39\"],[\"15\",\"35\"],[\"35\"]]},{\"description\":\"Holidays\",\"hours\":[[],[],[],[],[],[\"15\"],[\"15\"],[\"20\"],[\"28\"],[\"25\"],[\"30\"],[\"18\"],[\"13\"],[\"13\"],[\"13\"],[\"20\"],[\"20\"],[\"24\"],[\"22\"],[\"22\"],[\"27\"],[\"25\"],[\"23\"],[\"25\"]]}],\"stop\":[{\"id\":13,\"name\":\"Skawina\",\"onDemand\":false,\"delay\":0},{\"id\":14,\"name\":\"Skawina Ajka\",\"onDemand\":false,\"delay\":1},{\"id\":15,\"name\":\"Skawina Cmentarz\",\"onDemand\":false,\"delay\":3},{\"id\":16,\"name\":\"Skawina Rzepnik\",\"onDemand\":false,\"delay\":5},{\"id\":17,\"name\":\"Skawina Podlipki\",\"onDemand\":false,\"delay\":6},{\"id\":18,\"name\":\"Wrony\",\"onDemand\":false,\"delay\":8},{\"id\":19,\"name\":\"Baczyńskiego\",\"onDemand\":true,\"delay\":10},{\"id\":20,\"name\":\"Skotniki\",\"onDemand\":false,\"delay\":12},{\"id\":21,\"name\":\"Babińskiego\",\"onDemand\":false,\"delay\":13},{\"id\":22,\"name\":\"Bunscha\",\"onDemand\":true,\"delay\":14}]}]}}";
        JsonSerializer serializer = new JsonSerializer();

        ILine line = new CracowLine(283);
        String actual = serializer.serializeLine(line);

        assertThat(expected).isEqualTo(actual);
    }
}
